"use strict";
/* global btoa, atob */
Object.defineProperty(exports, "__esModule", { value: true });
exports.b64DecodeUnicode = exports.b64EncodeUnicode = void 0;
/**
 * Unicode safe encode
 * @see https://stackoverflow.com/questions/30106476
 * @param str - the string to encode
 * @return an encoded version of str
 */
exports.b64EncodeUnicode = (str) => btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (_match, p1) => String.fromCharCode(parseInt(p1, 16))))
    .replace(/\+/g, '-')
    .replace(/\//g, '_')
    .replace(/=/g, '');
/**
 * Unicode safe decode
 * @param str - the string to decode
 * @return the decoded str
 */
exports.b64DecodeUnicode = (str) => decodeURIComponent(Array.prototype.map
    .call(atob(str.replace(/_/g, '/').replace(/-/g, '+')), (c) => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))
    .join(''));
